"use strict";(self.webpackChunkfrontend_contrader=self.webpackChunkfrontend_contrader||[]).push([[143],{8143:(Z,l,i)=>{i.r(l),i.d(l,{default:()=>U});var s=i(1896),o=i(6223),f=i(2296),g=i(1545),c=i(9157),p=i(2032),u=i(6385),y=i(5986),O=i(617),P=i(8525),v=i(8034),C=i(6814),D=i(5940),M=i(3149),d=i(3302),t=i(5879),E=i(1522),T=i(7700),x=i(6025);const I=["fileInput"];let U=(()=>{var n;class m{constructor(a,r,e,h,b,A){this.router=a,this.utentiService=r,this.route=e,this._formBuilder=h,this.dialog=b,this.signupService=A,this.imageData="",this.id=0,this.userinfo_id=0,this.factory_id=0,this.cart_id=0,this.email="",this.password="",this.usertype="",this.lastname="",this.name="",this.date=new Date,this.gender="",this.nation="",this.province="",this.city="",this.address="",this.factory_name="",this.factory_province="",this.factory_city="",this.factory_address="",this.factory_description="",this.FormGroup2=this._formBuilder.group({factory_name:[this.factory_name,[o.kI.required]],factory_description:["",[o.kI.required]],factory_province:["",[o.kI.required]],factory_city:["",[o.kI.required]],factory_address:["",[o.kI.required]]}),this.hide=!0,this.isLastButtonDisabled=!1,this.apiLoading=!1,this.log="",this.INPUT_CONSTANT=d.aq}ngOnInit(){let a=localStorage.getItem("userSession");null==a&&(a="");let r=JSON.parse(a);this.id=r.id,this.utentiService.readUser(this.id).subscribe(e=>{null!=e.image&&(this.imageData=e.image.data),this.userinfo_id=e.userInfoDTO.id,this.email=e.username,this.password=e.password,this.usertype=e.usertype,this.name=e.userInfoDTO.name,this.lastname=e.userInfoDTO.lastname,this.gender=e.userInfoDTO.genderType,this.date=e.userInfoDTO.date,this.nation=e.userInfoDTO.nation,this.province=e.userInfoDTO.province,this.city=e.userInfoDTO.city,this.address=e.userInfoDTO.address,this.factory_id=e.factoryDTO.id,this.factory_name=e.factoryDTO.name,this.factory_province=e.factoryDTO.province,this.factory_city=e.factoryDTO.city,this.factory_address=e.factoryDTO.address,this.factory_description=e.factoryDTO.description,this.FormGroup2=this._formBuilder.group({factory_name:[this.factory_name,[o.kI.required]],factory_description:[this.factory_description,[o.kI.required]],factory_province:[this.factory_province,[o.kI.required]],factory_city:[this.factory_city,[o.kI.required]],factory_address:[this.factory_address,[o.kI.required]]})})}goToProfile(){this.router.navigate(["/gestionale/myprofileadmin"])}update(){let a={id:this.id,factory_id:this.factory_id,userinfo_id:this.userinfo_id,cart_id:this.cart_id,email:this.email,usertype:this.usertype,password:this.password,lastname:this.lastname,firstname:this.name,birthday:this.date.toLocaleString("EU-it"),genre:this.gender,nation:this.nation,province:this.province,city:this.city,address:this.address,factory_name:this.FormGroup2.value.factory_name,factory_description:this.FormGroup2.value.factory_description,factory_province:this.FormGroup2.value.factory_province,factory_city:this.FormGroup2.value.factory_city,factory_address:this.FormGroup2.value.factory_address,image:{id:this.id,data:this.imageData}};this.FormGroup2.valid?(this.log="",this.signupService.checkFactoryName(a.factory_name,a.factory_id).subscribe({next:r=>{r&&(this.log="Nome gi\xe0 in uso"),""==this.log?this.signupService.update(a).subscribe({next:e=>{this.dialog.open(M.t,{width:"660px",height:"300px",disableClose:!0,data:{title:d.cm.factory_update_successful,body:d.cm.factory_update_successful2}}).afterClosed().subscribe(()=>{this.goToProfile()})},error:e=>{console.log(e),console.error(`Error: ${e.message}`),this.isLastButtonDisabled=!1,this.apiLoading=!1},complete:()=>{console.log("Observable complete")}}):(this.isLastButtonDisabled=!1,this.apiLoading=!1)}})):(this.apiLoading=!1,this.isLastButtonDisabled=!1)}}return(n=m).\u0275fac=function(a){return new(a||n)(t.Y36(s.F0),t.Y36(E.p),t.Y36(s.gz),t.Y36(o.qu),t.Y36(T.uw),t.Y36(x.Or))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-modifica-factory"]],viewQuery:function(a,r){if(1&a&&t.Gf(I,5),2&a){let e;t.iGM(e=t.CRH())&&(r.fileInput=e.first)}},standalone:!0,features:[t.jDz],decls:44,vars:4,consts:[[1,"container2"],[1,"comp1"],[1,"comp4"],[1,"button-confirm-container"],["mat-raised-button","",2,"padding-right","80px","padding-left","80px","background-color","#a6039b","color","white","float","right",3,"click"],[3,"formGroup"],[1,"error"],[1,"p"],["appearance","outline",2,"flex-grow","1","padding-right","10px"],["matInput","","formControlName","factory_name","required","","maxlength","255"],[2,"flex-grow","1","padding-right","220px"],["matInput","","formControlName","factory_address","required","","maxlength","255"],["matInput","","formControlName","factory_province","required","","maxlength","2"],["matInput","","formControlName","factory_city","required","","maxlength","255"],["appearance","outline",1,"example-full-width",2,"flex-grow","1","padding-right","10px","width","1400px","max-height","173px","min-height","173px"],["matInput","","required","","formControlName","factory_description","rows","7",2,"resize","none"],[1,"p3"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3"),t._uU(3),t.qZA()(),t.TgZ(4,"div",2)(5,"div",3)(6,"button",4),t.NdJ("click",function(){return r.update()}),t._uU(7,"SALVA"),t.qZA()()()(),t._UZ(8,"br")(9,"br"),t.TgZ(10,"form",5)(11,"div",0)(12,"p",6),t._uU(13),t.qZA()(),t.TgZ(14,"div",0)(15,"p",7),t._uU(16,"Informazioni Generali"),t.qZA()(),t.TgZ(17,"div",0)(18,"mat-form-field",8)(19,"mat-label"),t._uU(20,"Nome"),t.qZA(),t._UZ(21,"input",9),t.qZA(),t._UZ(22,"mat-label",10),t.qZA(),t.TgZ(23,"div",0)(24,"mat-form-field",8)(25,"mat-label"),t._uU(26,"Indirizzo"),t.qZA(),t._UZ(27,"input",11),t.qZA(),t.TgZ(28,"mat-form-field",8)(29,"mat-label"),t._uU(30,"Provincia"),t.qZA(),t._UZ(31,"input",12),t.qZA(),t.TgZ(32,"mat-form-field",8)(33,"mat-label"),t._uU(34,"Citt\xe0"),t.qZA(),t._UZ(35,"input",13),t.qZA()(),t.TgZ(36,"div",0)(37,"mat-form-field",14)(38,"mat-label"),t._uU(39,"Descrizione"),t.qZA(),t._UZ(40,"textarea",15),t.qZA()(),t.TgZ(41,"div",0)(42,"p",16),t._uU(43),t.qZA()()()),2&a&&(t.xp6(3),t.Oqu(r.factory_name),t.xp6(7),t.Q6J("formGroup",r.FormGroup2),t.xp6(3),t.Oqu(r.log),t.xp6(30),t.Oqu(r.INPUT_CONSTANT.campi_obbligatori))},dependencies:[C.ez,s.Bz,f.ot,f.lW,g.T5,o.u5,o._Y,o.Fj,o.JJ,o.JL,o.Q7,o.nD,o.UX,o.sg,o.u,c.lN,c.KE,c.hX,u.t,p.c,p.Nt,y.p9,O.Ps,P.LD,v.FA,D.Cq],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;background-color:#0a4a89;background-size:cover;background-repeat:no-repeat;background-position:center center}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{height:10px!important}[_nghost-%COMP%]     .mat-mdc-form-field{margin:0!important}[_nghost-%COMP%]     .mat-stepper-horizontal-line{margin:-1!important;border-top-width:-1!important;border-top-style:solid;flex:none;height:19px!important;margin:0!important;min-width:0!important;border-top-color:transparent!important}[_nghost-%COMP%]     .mat-stepper-horizontal-line:before{content:">"}[_nghost-%COMP%]     .mat-step-icon-state-edit{background-color:#41cf0d}.styled-image[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:200px;height:130px;color:#fff}.form-cont[_ngcontent-%COMP%]{width:50%;padding:20px;border-radius:15px;background-color:#fff}.bottom-form-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:40px;margin-top:10px}.form-input-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.container2[_ngcontent-%COMP%]{display:flex;justify-content:space-between;width:100%;height:100%;padding:2px;background-color:#fff;border-radius:8px}.container2[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}.container2[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.938rem;font-weight:700;color:#656d70;line-height:15px;text-decoration:none}.comp1[_ngcontent-%COMP%], .comp2[_ngcontent-%COMP%], .comp3[_ngcontent-%COMP%], .comp4[_ngcontent-%COMP%]{flex-grow:1}.p[_ngcontent-%COMP%]{color:#9b999d;font-weight:700}.p2[_ngcontent-%COMP%]{color:#9b999d}.p3[_ngcontent-%COMP%]{color:#9b999d;font-size:12px}.error[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;white-space:pre-line;font-size:1.5rem;font-weight:500;color:#d32f2f;line-height:19px}']}),m})()}}]);