"use strict";(self.webpackChunkfrontend_contrader=self.webpackChunkfrontend_contrader||[]).push([[625],{3625:(D,c,o)=>{o.r(c),o.d(c,{default:()=>v});var f=o(6814),t=o(6223),m=o(1896),l=o(3302),h=o(9623),C=o(6706),n=o(5879),u=o(6025),O=o(7700),M=o(5986),d=o(2296),P=o(2032),g=o(9157),b=o(617);let v=(()=>{var a;class _{constructor(r,e,i,s,E,T){this.loaderSpinnerService=r,this.loginService=e,this.dialog=i,this.router=s,this.fb=E,this.notificationService=T,this.buttonConstant=l.$C,this.errorsConstant=l.sm,this.inputConstant=l.aq,this.labelConstant=l.$I,this.hide=!0,this.regex=/(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\u0023-\u0039]\ufe0f?\u20e3|\u3299|\u3297|\u303d|\u3030|\u24c2|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|\ud83c[\ude32-\ude3a]|\ud83c[\ude50-\ude51]|\u203c|\u2049|[\u25aa-\u25ab]|\u25b6|\u25c0|[\u25fb-\u25fe]|\u00a9|\u00ae|\u2122|\u2139|\ud83c\udc04|[\u2600-\u26FF]|\u2b05|\u2b06|\u2b07|\u2b1b|\u2b1c|\u2b50|\u2b55|\u231a|\u231b|\u2328|\u23cf|[\u23e9-\u23f3]|[\u23f8-\u23fa]|\ud83c\udccf|\u2934|\u2935|[\u2190-\u21ff])/g,this.log="",this.loginForm=this.fb.group({email:["",[t.kI.required,t.kI.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/),t.kI.minLength(3),t.kI.maxLength(128)]],password:["",[t.kI.required,t.kI.minLength(8),t.kI.maxLength(64)]],rememberMe:[!1]}),this.passwordValueSubscription=this.loginForm.controls.password.valueChanges.subscribe(w=>{this.loginForm.controls.password.setValue(w.replace(this.regex,""),{emitEvent:!1})})}ngOnDestroy(){this.passwordValueSubscription&&this.passwordValueSubscription.unsubscribe()}onSubmit(){var r={username:this.loginForm.value.email,password:this.loginForm.value.password,rememberMe:this.loginForm.value.rememberMe};this.loaderSpinnerService.show(),this.loginForm.valid?this.loginService.login(r).subscribe({next:e=>{if(null!=e){let i=JSON.parse(JSON.stringify(e)).factoryDTO,s=JSON.parse(JSON.stringify(e)).id;switch(null!=i?this.loginService.setUtenteSession(e?.username,e?.userInfoDTO,e?.usertype,s,i?.id):this.loginService.setUtenteSession(e?.username,e?.userInfoDTO,e?.usertype,s),e.usertype.toLowerCase()){case"superadmin":this.router.navigate(["/gestionale/utenti"]);break;case"admin":this.router.navigate(["/gestionale/prodotti"]);break;case"user":this.router.navigate(["/user/lista"])}}else this.log="Credenziali errate";this.loaderSpinnerService.hide()},error:e=>{console.log(r),console.log(e)}}):this.loaderSpinnerService.hide()}openModalRecuperoPassword(){this.dialog.open(C.af,{width:"660px",height:"300px",disableClose:!0})}navigateTo(){this.router.navigate(["/login"])}doLogin(){console.log("click accedi"),this.onSubmit()}gotoRegistrazione(){this.router.navigate(["/register"])}}return(a=_).\u0275fac=function(r){return new(r||a)(n.Y36(u.QU),n.Y36(u.r6),n.Y36(O.uw),n.Y36(m.F0),n.Y36(t.qu),n.Y36(u.gq))},a.\u0275cmp=n.Xpm({type:a,selectors:[["app-login-form"]],standalone:!0,features:[n.jDz],decls:36,vars:18,consts:[[1,"login-page"],[1,"login-image"],["src","../../../../../assets/images/television_app_logo.svg","alt","Logo",1,"img-pointer",3,"click"],[1,"login-form-container"],[1,"login-form",3,"formGroup","ngSubmit"],[1,"title"],[1,"subtitle",3,"innerHTML"],[1,"error"],["appearance","outline","color","accent"],["matInput","","formControlName","email","name","username","autocomplete","username","maxlength","128"],["matInput","","formControlName","password","autocomplete","new-password","maxlength","64","noEmoji","",3,"type"],["mat-icon-button","","matSuffix","","type","button",3,"click"],[1,"visibility-password"],[1,"password-container"],["formControlName","rememberMe",1,"example-margin"],["tabindex","0",1,"a-button",3,"keydown.enter","click"],["mat-raised-button","","color","primary",1,"button-action","login","c-button-large",3,"disabled"],[1,"register"],[3,"click"]],template:function(r,e){1&r&&(n.TgZ(0,"div",0)(1,"div",1)(2,"img",2),n.NdJ("click",function(){return e.navigateTo()}),n.qZA()(),n.TgZ(3,"div",3)(4,"form",4),n.NdJ("ngSubmit",function(){return e.onSubmit()}),n.TgZ(5,"p",5),n._uU(6),n.qZA(),n._UZ(7,"p",6),n.TgZ(8,"p",7),n._uU(9),n.qZA(),n.TgZ(10,"mat-form-field",8)(11,"mat-label"),n._uU(12),n.qZA(),n._UZ(13,"input",9),n.TgZ(14,"mat-error"),n._uU(15),n.qZA()(),n.TgZ(16,"mat-form-field",8)(17,"mat-label"),n._uU(18),n.qZA(),n._UZ(19,"input",10),n.TgZ(20,"button",11),n.NdJ("click",function(){return e.hide=!e.hide}),n.TgZ(21,"mat-icon",12),n._uU(22),n.qZA()(),n.TgZ(23,"mat-error"),n._uU(24),n.qZA()(),n.TgZ(25,"div",13)(26,"mat-checkbox",14),n._uU(27),n.qZA(),n.TgZ(28,"a",15),n.NdJ("keydown.enter",function(){return e.openModalRecuperoPassword()})("click",function(){return e.openModalRecuperoPassword()}),n._uU(29),n.qZA()(),n.TgZ(30,"button",16),n._uU(31),n.qZA(),n.TgZ(32,"p",17),n._uU(33),n.TgZ(34,"span",18),n.NdJ("click",function(){return e.gotoRegistrazione()}),n._uU(35),n.qZA()()()()()),2&r&&(n.xp6(4),n.Q6J("formGroup",e.loginForm),n.xp6(2),n.Oqu(e.labelConstant.accedi),n.xp6(1),n.Q6J("innerHTML",e.labelConstant.inserisci_credenziali,n.oJD),n.xp6(2),n.Oqu(e.log),n.xp6(3),n.Oqu(e.inputConstant.email),n.xp6(3),n.Oqu(e.loginForm.controls.email.hasError("pattern")?e.errorsConstant.input.email_pattern:""===e.loginForm.controls.email.value?e.errorsConstant.required:e.loginForm.controls.email.hasError("minlength")?e.errorsConstant.input.min_length_3:e.errorsConstant.input.max_length_128),n.xp6(3),n.Oqu(e.inputConstant.password),n.xp6(1),n.Q6J("type",e.hide?"password":"text"),n.xp6(1),n.uIk("aria-label","Hide password")("aria-pressed",e.hide),n.xp6(2),n.Oqu(e.hide?"visibility":"visibility_off"),n.xp6(2),n.Oqu(e.loginForm.controls.password.hasError("required")?e.errorsConstant.required:e.loginForm.controls.password.hasError("minlength")?e.errorsConstant.input.min_length_8:e.errorsConstant.input.max_length_64),n.xp6(3),n.Oqu(e.labelConstant.ricordami),n.xp6(2),n.Oqu(e.labelConstant.password_dimenticata),n.xp6(1),n.Q6J("disabled",e.loginForm.invalid),n.xp6(1),n.hij(" ",e.buttonConstant.accedi," "),n.xp6(2),n.hij(" ",e.labelConstant.no_account," "),n.xp6(2),n.Oqu(e.labelConstant.registrati))},dependencies:[f.ez,t.u5,t._Y,t.Fj,t.JJ,t.JL,t.nD,t.UX,t.sg,t.u,m.Bz,h.hd,M.oG,d.lW,d.RK,P.Nt,g.KE,g.hX,g.TO,g.R9,b.Hw],styles:[".login-page[_ngcontent-%COMP%]{width:100vw;max-width:100%;min-height:100vh;display:flex;flex-direction:column;align-items:center;gap:25px}.login-page[_ngcontent-%COMP%]   .login-image[_ngcontent-%COMP%]{width:100vw;height:46vh;background-image:url(bg-logo2.f2cb3892658d5bef.svg);background-size:cover;background-position:bottom;display:flex;align-items:center;justify-content:center}.login-page[_ngcontent-%COMP%]   .login-image[_ngcontent-%COMP%]   .img-pointer[_ngcontent-%COMP%]{cursor:pointer;width:25%}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-width:581px;max-height:60vh}@media screen and (min-width: 1025px){.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]{flex-direction:row}}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;gap:0;width:100%;height:100%;margin-top:40px}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{text-align:center;font-size:2rem;font-weight:700;color:#000;line-height:37.5px}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{text-align:center;margin-bottom:36px;white-space:pre-line;font-size:1rem;font-weight:500;color:#656d70;line-height:19px}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]{text-align:center;z-index:1;font-size:1rem;font-weight:400;color:#000;line-height:19px}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .register[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer;font-size:1rem;font-weight:400;color:#0a4a89;line-height:19px;text-decoration:underline}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;white-space:pre-line;font-size:1.5rem;font-weight:500;color:#d32f2f;line-height:19px}@media screen and (min-width: 1025px){.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]{width:100%}}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .password-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;width:100%}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .login-form[_ngcontent-%COMP%]   .first-access[_ngcontent-%COMP%]{width:100%;margin-top:24px}.login-page[_ngcontent-%COMP%]   .login-form-container[_ngcontent-%COMP%]   .button-action[_ngcontent-%COMP%]{width:100%;margin-top:8px;margin-bottom:36px}"]}),_})()}}]);