"use strict";(self.webpackChunkfrontend_contrader=self.webpackChunkfrontend_contrader||[]).push([[897],{897:(F,_,i)=>{i.r(_),i.d(_,{default:()=>S});var g=i(1896),t=i(6223),c=i(2296),m=i(1545),u=i(9157),f=i(2032),h=i(6385),Z=i(5986),v=i(617),b=i(8525),d=i(8034),A=i(6814),U=i(5940),T=i(7914),e=i(5879),x=i(6025),C=i(3680);function q(r,s){1&r&&(e.TgZ(0,"mat-icon"),e._uU(1,"check"),e.qZA())}function I(r,s){1&r&&e._uU(0,"Accesso")}function O(r,s){1&r&&e._uU(0,"Anagrafica")}function E(r,s){1&r&&(e.TgZ(0,"button",29),e._uU(1,"AVANTI"),e.qZA())}function y(r,s){1&r&&e._UZ(0,"mat-spinner",52)}function M(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"CONFERMA"),e.qZA())}function N(r,s){if(1&r){const a=e.EpF();e.TgZ(0,"button",50),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.register())}),e.YNc(1,y,1,0,"mat-spinner",51),e.YNc(2,M,2,0,"span",49),e.qZA()}if(2&r){const a=e.oxw();e.Q6J("disabled",a.isLastButtonDisabled),e.xp6(1),e.Q6J("ngIf",a.apiLoading),e.xp6(1),e.Q6J("ngIf",!a.apiLoading)}}function D(r,s){1&r&&e._uU(0,"Azienda")}function P(r,s){1&r&&e._UZ(0,"mat-spinner",52)}function k(r,s){1&r&&(e.TgZ(0,"span"),e._uU(1,"CONFERMA"),e.qZA())}function L(r,s){if(1&r){const a=e.EpF();e.TgZ(0,"div")(1,"mat-step",53)(2,"form",9),e.YNc(3,D,1,0,"ng-template",10),e.TgZ(4,"h5",3),e._uU(5,"INFO"),e.qZA(),e.TgZ(6,"div",18)(7,"mat-form-field",54)(8,"mat-label"),e._uU(9,"Nome"),e.qZA(),e._UZ(10,"input",55),e.qZA()(),e.TgZ(11,"div",18)(12,"mat-form-field",56)(13,"mat-label"),e._uU(14,"Descrizione"),e.qZA(),e._UZ(15,"textarea",57),e.qZA()(),e.TgZ(16,"div",18)(17,"mat-form-field",12)(18,"mat-label"),e._uU(19,"Provincia"),e.qZA(),e._UZ(20,"input",58),e.qZA(),e.TgZ(21,"mat-form-field",12)(22,"mat-label"),e._uU(23,"Citt\xe0"),e.qZA(),e._UZ(24,"input",59),e.qZA(),e.TgZ(25,"mat-form-field",12)(26,"mat-label"),e._uU(27,"Indirizzo"),e.qZA(),e._UZ(28,"input",60),e.qZA()(),e.TgZ(29,"p",25),e._uU(30),e.qZA(),e.TgZ(31,"p",25),e._uU(32),e.qZA(),e.TgZ(33,"p",26),e._uU(34,"Campi obbligatori*"),e.qZA(),e._UZ(35,"mat-divider"),e.TgZ(36,"div",27)(37,"button",46),e._uU(38,"INDIETRO"),e.qZA(),e.TgZ(39,"button",50),e.NdJ("click",function(){e.CHM(a);const o=e.oxw();return e.KtG(o.register())}),e.YNc(40,P,1,0,"mat-spinner",51),e.YNc(41,k,2,0,"span",49),e.qZA()()()()()}if(2&r){const a=e.oxw();e.xp6(1),e.Q6J("stepControl",a.thirdFormGroup),e.xp6(1),e.Q6J("formGroup",a.thirdFormGroup),e.xp6(28),e.Oqu(a.log),e.xp6(2),e.Oqu(a.log2),e.xp6(7),e.Q6J("disabled",a.isLastButtonDisabled),e.xp6(1),e.Q6J("ngIf",a.apiLoading),e.xp6(1),e.Q6J("ngIf",!a.apiLoading)}}let S=(()=>{var r;class s{constructor(n,o,l,p){this.router=n,this.route=o,this._formBuilder=l,this.signupService=p,this.firstFormGroup=this._formBuilder.group({email:["",[t.kI.required,t.kI.pattern(/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/),t.kI.minLength(3),t.kI.maxLength(128)]],password:["",[t.kI.required,t.kI.minLength(8),t.kI.maxLength(64)]],password2:["",[t.kI.required,t.kI.minLength(8),t.kI.maxLength(64)]],firstCtrl:[!1],usertype:["user",t.kI.required],checkbox:[!0,t.kI.requiredTrue]},{validator:T.R.MatchPassword}),this.secondFormGroup=this._formBuilder.group({secondCtrl:[!1],firstname:["",[t.kI.required]],lastname:["",[t.kI.required]],birthday:["2001-09-11",[t.kI.required]],genre:["UOMO",[t.kI.required]],nation:["",[t.kI.required]],province:["",[t.kI.required]],city:["",[t.kI.required]],address:["",[t.kI.required]]}),this.thirdFormGroup=this._formBuilder.group({thirdCtrl:[!1],factory_name:["",[t.kI.required]],factory_description:["",[t.kI.required]],factory_province:["",[t.kI.required]],factory_city:["",[t.kI.required]],factory_address:["",[t.kI.required]]}),this.isOptional=!1,this.hide=!0,this.isLastButtonDisabled=!1,this.isUserSignup=!0,this.apiLoading=!1,this.log="",this.log2="",this.checkBoxSelected=!1}ngOnInit(){}goToLogin(){this.router.navigate(["/login"])}onUsertypeChanged(n){"user"==n.value?this.isUserSignup=!0:"admin"==n.value&&(this.isUserSignup=!1)}register(){this.isLastButtonDisabled=!0,this.apiLoading=!0;let n={email:this.firstFormGroup.value.email,usertype:this.firstFormGroup.value.usertype,password:this.firstFormGroup.value.password,lastname:this.secondFormGroup.value.lastname,firstname:this.secondFormGroup.value.firstname,birthday:this.secondFormGroup.value.birthday,genre:this.secondFormGroup.value.genre,nation:this.secondFormGroup.value.nation,province:this.secondFormGroup.value.province,city:this.secondFormGroup.value.city,address:this.secondFormGroup.value.address,factory_name:this.thirdFormGroup.value.factory_name,factory_description:this.thirdFormGroup.value.factory_description,factory_province:this.thirdFormGroup.value.factory_province,factory_city:this.thirdFormGroup.value.factory_city,factory_address:this.thirdFormGroup.value.factory_address};this.firstFormGroup.valid&&this.secondFormGroup.valid&&(this.thirdFormGroup.valid||this.isUserSignup)?(this.log=this.log2="",this.signupService.checkEmail(n.email).subscribe({next:o=>{o&&(this.log="Email gi\xe0 in uso"),this.isUserSignup?this.log==this.log2?this.signupService.signup(n).subscribe({next:l=>{this.router.navigate(["/register/success"])},error:l=>{console.log(l),console.error(`Error: ${l.message}`),this.isLastButtonDisabled=!1,this.apiLoading=!1},complete:()=>{console.log("Observable complete")}}):(this.isLastButtonDisabled=!1,this.apiLoading=!1):this.signupService.checkFactoryName(n.factory_name).subscribe({next:l=>{l&&(this.log2="Nome azienda gi\xe0 in uso"),this.log==this.log2?this.signupService.signup(n).subscribe({next:p=>{this.router.navigate(["/register/success"])},error:p=>{console.log(p),console.error(`Error: ${p.message}`),this.isLastButtonDisabled=!1,this.apiLoading=!1},complete:()=>{console.log("Observable complete")}}):(this.isLastButtonDisabled=!1,this.apiLoading=!1)}})}})):(this.apiLoading=!1,this.isLastButtonDisabled=!1)}}return(r=s).\u0275fac=function(n){return new(n||r)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(t.qu),e.Y36(x.Or))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-signup"]],standalone:!0,features:[e.jDz],decls:127,vars:28,consts:[[1,"container"],[1,"styled-image"],[1,"form-cont"],[2,"color","#166cdb"],[2,"color","#9B999D"],["linear",""],["stepper",""],["matStepperIcon","edit"],[3,"stepControl","editable"],["autocomplete","off",3,"formGroup"],["matStepLabel",""],[1,"form-input-row",2,"margin","0px !important"],["appearance","outline",2,"flex-grow","1","padding-right","5px"],["matInput","","placeholder","ex@example.com","formControlName","email","name","email","required","","maxlength","128"],["appearance","outline",2,"flex-grow","1","padding-left","5px"],["formControlName","usertype",3,"value","selectionChange"],["value","user"],["value","admin"],[1,"form-input-row"],["name","password","matInput","","formControlName","password","required","","maxlength","64",3,"type"],["mat-icon-button","","matSuffix","",3,"click"],["matInput","","formControlName","password2","required","","maxlength","64",3,"type"],[1,"example-section",2,"margin-left","-10px"],["formControlName","checkbox",1,"example-margin"],["href","#",2,"color","#a6039b !important"],[1,"error"],[2,"margin","10px 0 10px 0","color","#9B999D"],[1,"bottom-form-bar"],["mat-button","","color","primary",2,"color","#166cdb !important",3,"click"],["mat-raised-button","","matStepperNext","",2,"background-color","#a6039b","color","white"],["btn1",""],[3,"stepControl","optional"],["matInput","","placeholder","","formControlName","lastname","required","","maxlength","255"],["matInput","","placeholder","","formControlName","firstname","required","","maxlength","255"],["appearance","outline",2,"flex-grow","1","padding-right","2.5px"],["matInput","","formControlName","birthday","placeholder","Data di nascita",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["appearance","outline",2,"flex-grow","1","padding-left","2.5px","padding-right","5px"],["formControlName","genre",3,"value"],["value","UOMO"],["value","DONNA"],["matInput","","placeholder","","formControlName","nation","required","","maxlength","255"],["matInput","","placeholder","","formControlName","province","required","","maxlength","2"],["matInput","","placeholder","","formControlName","city","required","","maxlength","255"],["matInput","","placeholder","","formControlName","address","required","","maxlength","255"],["mat-stroked-button","","matStepperPrevious","","color","primary"],["mat-raised-button","","matStepperNext","","style","background-color: #a6039b; color: white",4,"ngIf","ngIfElse"],["isNotUserBlock",""],[4,"ngIf"],["mat-raised-button","","matStepperNext","",2,"background-color","#a6039b","color","white",3,"disabled","click"],["style","width: 14px; height: 14px; color: white;",4,"ngIf"],[2,"width","14px","height","14px","color","white"],[3,"stepControl"],["appearance","outline",2,"flex-grow","1","padding-right","0"],["matInput","","placeholder","","formControlName","factory_name","required","","maxlength","255"],["appearance","outline",1,"example-full-width",2,"flex-grow","1","padding-right","0"],["matInput","","placeholder","","rows","3","required","","formControlName","factory_description","maxlength","255",2,"resize","none"],["matInput","","placeholder","","formControlName","factory_province","required","","maxlength","2"],["matInput","","placeholder","","formControlName","factory_city","required","","maxlength","255"],["matInput","","placeholder","","formControlName","factory_address","required","","maxlength","255"]],template:function(n,o){if(1&n&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"h3",3),e._uU(4,"Registrati"),e.qZA(),e.TgZ(5,"p",4),e._uU(6,"Inserisci i tuoi dati e procedi con la registrazione"),e.qZA(),e._UZ(7,"mat-divider"),e.TgZ(8,"mat-stepper",5,6),e.YNc(10,q,2,0,"ng-template",7),e.TgZ(11,"mat-step",8)(12,"form",9),e.YNc(13,I,1,0,"ng-template",10),e.TgZ(14,"h5",3),e._uU(15,"CREDENZIALI DI ACCESSO"),e.qZA(),e.TgZ(16,"div",11)(17,"mat-form-field",12)(18,"mat-label"),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",13),e.qZA(),e.TgZ(21,"mat-form-field",14)(22,"mat-label"),e._uU(23,"Tipologia Utente"),e.qZA(),e.TgZ(24,"mat-select",15),e.NdJ("selectionChange",function(p){return o.onUsertypeChanged(p)}),e.TgZ(25,"mat-option",16),e._uU(26,"User"),e.qZA(),e.TgZ(27,"mat-option",17),e._uU(28,"Admin"),e.qZA()()()(),e.TgZ(29,"div",18)(30,"mat-form-field",12)(31,"mat-label"),e._uU(32,"Enter your password"),e.qZA(),e._UZ(33,"input",19),e.TgZ(34,"button",20),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(35,"mat-icon"),e._uU(36),e.qZA()(),e.TgZ(37,"mat-error"),e._uU(38),e.qZA()(),e.TgZ(39,"mat-form-field",14)(40,"mat-label"),e._uU(41,"Enter your password again"),e.qZA(),e._UZ(42,"input",21),e.TgZ(43,"button",20),e.NdJ("click",function(){return o.hide=!o.hide}),e.TgZ(44,"mat-icon"),e._uU(45),e.qZA()(),e.TgZ(46,"mat-error"),e._uU(47),e.qZA()()(),e.TgZ(48,"section",22)(49,"mat-checkbox",23),e._uU(50,"Ho preso visione dell'"),e.TgZ(51,"a",24),e._uU(52,"Informativa Privacy"),e.qZA()()(),e.TgZ(53,"mat-error"),e._uU(54),e.qZA(),e.TgZ(55,"p",25),e._uU(56),e.qZA(),e.TgZ(57,"p",25),e._uU(58),e.qZA(),e.TgZ(59,"p",26),e._uU(60,"Campi obbligatori*"),e.qZA(),e._UZ(61,"mat-divider"),e.TgZ(62,"div",27)(63,"button",28),e.NdJ("click",function(){return o.goToLogin()}),e._uU(64,"RITORNA ALLA LOGIN"),e.qZA(),e.TgZ(65,"button",29,30),e._uU(67,"AVANTI"),e.qZA()()()(),e.TgZ(68,"mat-step",31)(69,"form",9),e.YNc(70,O,1,0,"ng-template",10),e.TgZ(71,"h5",3),e._uU(72,"DATI ANAGRAFICI"),e.qZA(),e.TgZ(73,"div",18)(74,"mat-form-field",12)(75,"mat-label"),e._uU(76,"Cognome"),e.qZA(),e._UZ(77,"input",32),e.qZA(),e.TgZ(78,"mat-form-field",12)(79,"mat-label"),e._uU(80,"Nome"),e.qZA(),e._UZ(81,"input",33),e.qZA()(),e.TgZ(82,"div",18)(83,"mat-form-field",34),e._UZ(84,"input",35)(85,"mat-datepicker-toggle",36)(86,"mat-datepicker",null,37),e.qZA(),e.TgZ(88,"mat-form-field",38)(89,"mat-label"),e._uU(90,"Genere"),e.qZA(),e.TgZ(91,"mat-select",39)(92,"mat-option",40),e._uU(93,"UOMO"),e.qZA(),e.TgZ(94,"mat-option",41),e._uU(95,"DONNA"),e.qZA()()()(),e.TgZ(96,"div",18)(97,"mat-form-field",12)(98,"mat-label"),e._uU(99,"Nazione"),e.qZA(),e._UZ(100,"input",42),e.qZA(),e.TgZ(101,"mat-form-field",12)(102,"mat-label"),e._uU(103,"Provincia"),e.qZA(),e._UZ(104,"input",43),e.qZA(),e.TgZ(105,"mat-form-field",12)(106,"mat-label"),e._uU(107,"Citt\xe0"),e.qZA(),e._UZ(108,"input",44),e.qZA(),e.TgZ(109,"mat-form-field",12)(110,"mat-label"),e._uU(111,"Indirizzo"),e.qZA(),e._UZ(112,"input",45),e.qZA()(),e.TgZ(113,"p",25),e._uU(114),e.qZA(),e.TgZ(115,"p",25),e._uU(116),e.qZA(),e.TgZ(117,"p",26),e._uU(118,"Campi obbligatori*"),e.qZA(),e._UZ(119,"mat-divider"),e.TgZ(120,"div",27)(121,"button",46),e._uU(122,"INDIETRO"),e.qZA(),e.YNc(123,E,2,0,"button",47),e.YNc(124,N,3,3,"ng-template",null,48,e.W1O),e.qZA()()(),e.YNc(126,L,42,7,"div",49),e.qZA()()()),2&n){const l=e.MAs(87),p=e.MAs(125);e.xp6(11),e.Q6J("stepControl",o.firstFormGroup)("editable",!0),e.xp6(1),e.Q6J("formGroup",o.firstFormGroup),e.xp6(12),e.Q6J("value","user"),e.xp6(9),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(2),e.Oqu(""===o.firstFormGroup.controls.password.value?"Campo obbligatorio":o.firstFormGroup.controls.password.hasError("minlength")?"Almeno 8 caratteri":""),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(1),e.uIk("aria-label","Hide password")("aria-pressed",o.hide),e.xp6(2),e.Oqu(o.hide?"visibility_off":"visibility"),e.xp6(2),e.Oqu(o.firstFormGroup.controls.password2.hasError("passwordMismatch")?"Le password devono coincidere":""),e.xp6(7),e.Oqu(o.firstFormGroup.controls.email.hasError("pattern")?"Email non valida":""),e.xp6(2),e.Oqu(o.log),e.xp6(2),e.Oqu(o.log2),e.xp6(10),e.Q6J("stepControl",o.secondFormGroup)("optional",o.isOptional),e.xp6(1),e.Q6J("formGroup",o.secondFormGroup),e.xp6(15),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(6),e.Q6J("value","UOMO"),e.xp6(23),e.Oqu(o.log),e.xp6(2),e.Oqu(o.log2),e.xp6(7),e.Q6J("ngIf",!o.isUserSignup)("ngIfElse",p),e.xp6(3),e.Q6J("ngIf",!o.isUserSignup)}},dependencies:[A.ez,A.O5,g.Bz,c.ot,c.lW,c.RK,m.T5,m.C0,m.VY,m.Vq,m.Ic,m.fd,m.z9,t.u5,t._Y,t.Fj,t.JJ,t.JL,t.Q7,t.nD,t.UX,t.sg,t.u,u.lN,u.KE,u.hX,u.TO,u.R9,h.t,h.d,f.c,f.Nt,Z.p9,Z.oG,v.Ps,v.Hw,b.LD,b.gD,C.ey,d.FA,d.Mq,d.hl,d.nW,U.Cq,U.Ou],styles:['.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;width:100%;height:100%;background-color:#0a4a89;background-image:url(bg_registrazione_accesso.8d54d1d3400e5d2e.svg);background-size:cover;background-repeat:no-repeat;background-position:center center}[_nghost-%COMP%]     .mat-step-label.mat-step-label-active.mat-step-label-selected{color:#166cdb!important}[_nghost-%COMP%]     .mat-step-icon-selected{background-color:#166cdb}[_nghost-%COMP%]     .mat-mdc-form-field-subscript-wrapper{height:10px!important}[_nghost-%COMP%]     .mat-mdc-form-field{margin:0!important}[_nghost-%COMP%]     .mat-stepper-horizontal-line{margin:-1!important;border-top-width:-1!important;border-top-style:solid;flex:none;height:19px!important;margin:0!important;min-width:0!important;border-top-color:transparent!important}[_nghost-%COMP%]     .mat-stepper-horizontal-line:before{content:">"}[_nghost-%COMP%]     .mat-step-icon-state-edit{background-color:#41cf0d}.styled-image[_ngcontent-%COMP%]{position:fixed;top:20px;left:20px;width:200px;height:130px;background-image:url(television_app_logo.3975449a725de329.svg);color:#fff}.form-cont[_ngcontent-%COMP%]{width:50%;padding:20px 20px 0;border-radius:10px;background-color:#fff}.bottom-form-bar[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;width:100%;height:40px;margin-top:10px}.form-input-row[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between}.mat-stepper-horizontal[_ngcontent-%COMP%]{margin-top:8px}.mat-mdc-form-field[_ngcontent-%COMP%]{margin-top:16px}.error[_ngcontent-%COMP%]{text-align:center;margin-bottom:16px;white-space:pre-line;font-size:1.5rem;font-weight:500;color:#d32f2f;line-height:19px}']}),s})()}}]);