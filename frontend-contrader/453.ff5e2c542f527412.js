"use strict";(self.webpackChunkfrontend_contrader=self.webpackChunkfrontend_contrader||[]).push([[453],{1453:(v,f,i)=>{i.r(f),i.d(f,{default:()=>T});var r=i(6223),u=i(9623),d=i(3302),g=i(3149),m=i(6814),t=i(5879),p=i(1507),h=i(7700),C=i(1896),P=i(2296),O=i(2032),_=i(9157),x=i(3680),M=i(8525);const b=["fileInput"];function E(l,s){if(1&l){const c=t.EpF();t.ynx(0),t.TgZ(1,"button",28),t.NdJ("click",function(){const n=t.CHM(c).$implicit,a=t.oxw();return t.KtG(a.onImageSelected(n[3]))}),t.TgZ(2,"p",0),t._uU(3),t.qZA(),t.TgZ(4,"p",0),t._uU(5),t.qZA()(),t.BQk()}if(2&l){const c=s.$implicit;t.xp6(3),t.Oqu(c[0]),t.xp6(2),t.Oqu(c[1])}}let T=(()=>{var l;class s{constructor(o,e,n,a){this._formBuilder=o,this.prodottiService=e,this.dialog=n,this.router=a,this.userSession=JSON.parse(JSON.stringify(localStorage.getItem("userSession"))),this.idFactory=Number(JSON.parse(this.userSession).idFactory),this.imgSrc="",this.fileList=[],this.fileName="",this.fileSize=0,this.fileType="",this.fileBase64="",this.formGroup=this._formBuilder.group({name:["",r.kI.required],description:["",r.kI.required],price:["",r.kI.required],product_type:["",r.kI.required]}),this.INPUT_CONSTANT=d.aq}insertProdotto(){let o={id:0,id_factory:this.idFactory,name:this.formGroup.value.name,description:this.formGroup.value.description,price:this.formGroup.value.price,type:this.formGroup.value.product_type,tags:[],images:[]};5===this.fileList.length?(this.fileList.forEach((e,n)=>{o.images.push({id:0,data:e[3]})}),this.formGroup.valid?this.prodottiService.insertProdotto(o).subscribe({next:e=>{console.log(`Next value: ${e}`),this.dialog.open(g.t,{width:"660px",height:"300px",disableClose:!0,data:{title:d.cm.product_create_successful,body:d.cm.product_create_successful2}}).afterClosed().subscribe(()=>{this.router.navigate(["/gestionale/prodotti/lista"])})},error:e=>{console.log("ERROR"),console.log(e)}}):console.log("FORM NOT VALID")):(console.log("fileList not Valid"),this.dialog.open(g.t,{width:"660px",height:"300px",disableClose:!0,data:{title:"ERRORE IMMAGINI",body:"Devi impostare 5 immagini"}}))}openFileInput(){this.fileInput.nativeElement.click()}onFileSelected(o){const e=o.target.files;if(e.length>0){const n=e[0];this.fileName=n.name,this.fileSize=n.size,this.fileType=n.type,console.log("Nome del file:",this.fileName),console.log("Dimensione del file:",this.fileSize),console.log("Tipo del file:",this.fileType);let a=new FileReader;a.readAsDataURL(n),a.onload=()=>{this.fileBase64=a.result,console.log("Base64 del file:",this.fileBase64),this.fileList.push([this.fileName,this.fileSize.toString(),this.fileType,this.fileBase64])}}}onImageSelected(o){null!=this.fileList&&this.fileList?.length>0&&o.length>0&&(this.imgSrc=o)}deleteImage(){this.imgSrc=""}}return(l=s).\u0275fac=function(o){return new(o||l)(t.Y36(r.qu),t.Y36(p.A),t.Y36(h.uw),t.Y36(C.F0))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-crea-prodotto"]],viewQuery:function(o,e){if(1&o&&t.Gf(b,5),2&o){let n;t.iGM(n=t.CRH())&&(e.fileInput=n.first)}},standalone:!0,features:[t.jDz],decls:48,vars:5,consts:[[1,"p"],[1,"detail-flex-container"],[1,"main-image-container"],[1,"image",3,"src"],[1,"buttons-flex-container1"],["mat-raised-button","",1,"cancella",3,"click"],["mat-raised-button","",1,"modifica"],[1,"form-flex-container"],[3,"formGroup"],["appearance","outline",1,"nome"],["matInput","","placeholder","Prodotto di prova","formControlName","name","name","name","required","","maxlength","255"],["appearance","outline",1,"tipologia"],["formControlName","product_type",3,"value"],["value","VOD"],["value","LIVE"],["appearance","outline",1,"prezzo"],["matInput","","placeholder","Prezzo prodotto","formControlName","price","name","price","required",""],["appearance","outline",1,"descrizione"],["matInput","","placeholder","Descrizione","formControlName","description","name","description","required","","maxlength","255"],[1,"images-flex-container"],["type","file",2,"display","none",3,"change"],["fileInput",""],["mat-raised-button","",3,"click"],[1,"images-container"],[4,"ngFor","ngForOf"],[1,"warning-flex-container"],[1,"buttons-flex-container2"],["mat-raised-button","",1,"custom-button",3,"click"],[3,"click"]],template:function(o,e){1&o&&(t.TgZ(0,"p",0),t._uU(1,"Informazioni Generali"),t.qZA(),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"img",3),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return e.deleteImage()}),t._uU(7,"CANCELLA"),t.qZA(),t.TgZ(8,"button",6),t._uU(9,"MODIFICA"),t.qZA()()(),t.TgZ(10,"div",7)(11,"form",8)(12,"mat-form-field",9)(13,"mat-label"),t._uU(14,"Nome prodotto"),t.qZA(),t._UZ(15,"input",10),t.qZA(),t.TgZ(16,"mat-form-field",11)(17,"mat-label"),t._uU(18,"Tipologia"),t.qZA(),t.TgZ(19,"mat-select",12)(20,"mat-option",13),t._uU(21,"VOD"),t.qZA(),t.TgZ(22,"mat-option",14),t._uU(23,"LIVE"),t.qZA()()(),t.TgZ(24,"mat-form-field",15)(25,"mat-label"),t._uU(26,"Prezzo"),t.qZA(),t._UZ(27,"input",16),t.qZA(),t.TgZ(28,"mat-form-field",17)(29,"mat-label"),t._uU(30,"Descrizione"),t.qZA(),t._UZ(31,"input",18),t.qZA()()()(),t.TgZ(32,"div")(33,"span",0),t._uU(34,"Altre Immagini"),t.qZA(),t.TgZ(35,"div",19)(36,"input",20,21),t.NdJ("change",function(a){return e.onFileSelected(a)}),t.qZA(),t.TgZ(38,"button",22),t.NdJ("click",function(){return e.openFileInput()}),t._uU(39,"AGGIUNGI IMMAGINE"),t.qZA()(),t.TgZ(40,"div",23),t.YNc(41,E,6,2,"ng-container",24),t.qZA()(),t.TgZ(42,"div",25)(43,"span"),t._uU(44),t.qZA()(),t.TgZ(45,"div",26)(46,"button",27),t.NdJ("click",function(){return e.insertProdotto()}),t._uU(47,"SALVA"),t.qZA()()),2&o&&(t.xp6(4),t.s9C("src",e.imgSrc,t.LSH),t.xp6(7),t.Q6J("formGroup",e.formGroup),t.xp6(8),t.Q6J("value","VOD"),t.xp6(22),t.Q6J("ngForOf",e.fileList),t.xp6(3),t.Oqu(e.INPUT_CONSTANT.campi_obbligatori))},dependencies:[u.hd,P.lW,O.Nt,_.KE,_.hX,x.ey,M.gD,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.Q7,r.nD,r.sg,r.u,m.sg],styles:[".detail-flex-container[_ngcontent-%COMP%]{width:100%;display:flex;align-items:flex-start;justify-content:flex-start;margin-right:10px}.buttons-flex-container1[_ngcontent-%COMP%]{height:auto;display:flex;flex-direction:row;align-items:flex-start}.buttons-flex-container1[_ngcontent-%COMP%] > .cancella[_ngcontent-%COMP%]{width:187.5px;background-color:#fff;border-style:solid;border-color:red;border-width:2px;color:red;margin-top:10px}.buttons-flex-container1[_ngcontent-%COMP%] > .cancella[_ngcontent-%COMP%]:hover{background-color:#fff;color:red}.buttons-flex-container1[_ngcontent-%COMP%] > .modifica[_ngcontent-%COMP%]{width:187.5px;background-color:#af4fb4;color:#fff;margin-left:5px;margin-top:10px}.buttons-flex-container1[_ngcontent-%COMP%] > .modifica[_ngcontent-%COMP%]:hover{background-color:#913196}.buttons-flex-container2[_ngcontent-%COMP%]{width:100%;height:auto;display:flex;flex-direction:row-reverse;align-items:flex-start}.buttons-flex-container2[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{width:15%;background-color:#af4fb4;color:#fff;margin-left:5px}.buttons-flex-container2[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]:hover{background-color:#913196}.warning-flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.p[_ngcontent-%COMP%]{color:#9b999d;font-weight:700;margin:10px;font-size:24px}.main-image-container[_ngcontent-%COMP%]{margin:10px;width:25%;height:405px;border-radius:10px;border-width:2.5px;display:flex;flex-direction:column}.main-image-container[_ngcontent-%COMP%] > .button1[_ngcontent-%COMP%]{min-width:187.5px;margin-top:5px;background-color:#af4fb4;color:#fff}.main-image-container[_ngcontent-%COMP%] > .button2[_ngcontent-%COMP%]{margin-top:5px;background-color:#fff;color:red}.image[_ngcontent-%COMP%]{height:330px;background-color:#f2f2f2;object-fit:cover;border-style:dashed;border-color:#9b999d;border-radius:5px}.file-input[_ngcontent-%COMP%]{display:none}.custom-button[_ngcontent-%COMP%]{margin-bottom:1px}.form-flex-container[_ngcontent-%COMP%]{width:40%;display:flex;align-items:flex-start;flex-direction:column;flex-grow:1}.form-flex-container[_ngcontent-%COMP%]   .nome[_ngcontent-%COMP%]{min-width:100%}.form-flex-container[_ngcontent-%COMP%]   .tipologia[_ngcontent-%COMP%]{min-width:50%;padding-right:5px}.form-flex-container[_ngcontent-%COMP%]   .prezzo[_ngcontent-%COMP%]{min-width:50%;padding-left:5px}.form-flex-container[_ngcontent-%COMP%]   .descrizione[_ngcontent-%COMP%]{min-width:100%;height:150px}.images-flex-container[_ngcontent-%COMP%]{display:flex;flex-direction:row-reverse}.images-flex-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{background-color:#fff;color:#af4fb4;font-weight:700;border-style:solid;padding:20px;border-width:2px;border-color:#af4fb4;font-size:20px}.images-container[_ngcontent-%COMP%]{min-height:200px;flex-direction:column}.images-container[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{border-style:solid;border-color:#000;margin:20px}"]}),s})()}}]);