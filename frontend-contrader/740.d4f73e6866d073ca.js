"use strict";(self.webpackChunkfrontend_contrader=self.webpackChunkfrontend_contrader||[]).push([[740],{5740:(E,p,o)=>{o.r(p),o.d(p,{default:()=>f});var _=o(515),r=o(6814),u=o(5313),c=o(3302),t=o(5879),g=o(1896),h=o(3601);function m(a,d){if(1&a){const i=t.EpF();t.ynx(0),t.TgZ(1,"app-generic-table",4),t.NdJ("emitChangePage",function(e){t.CHM(i);const s=t.oxw();return t.KtG(s.changePage(e))}),t.qZA(),t.BQk()}if(2&a){const i=t.oxw();t.xp6(1),t.Q6J("pageIndex",i.pageIndex)("size",i.size)("totalElements",i.totalElements)("dataSource",i.dataSource)("displayedColumns",i.displayedColumns)("cellHeadTypes",i.cellHeadTypes)("hasSearch",!1)("hasSelect",!1)}}function O(a,d){1&a&&(t.TgZ(0,"div",5)(1,"span"),t._uU(2),t.ALo(3,"uppercase"),t.qZA()()),2&a&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"Nessun Risultato")))}let f=(()=>{var a;class d{constructor(n,e,s){this.activatedRoute=n,this.route=e,this.orderService=s,this.displayedColumns=c.Z0.storico_ordini,this.cellHeadTypes={id_ordine:"sort",data_ordine:"sort",cost:"sort"}}ngOnInit(){this.pageIndex=0,this.totalElements=1;let n=localStorage.getItem("userSession");if(n)var s=JSON.parse(n).id;this.orderService.getOrdersByUserId(s).subscribe({next:l=>{console.log(l),this.listaOrdini=l,this.listaOrdini&&(console.log("inizializzando il datasource"),this.dataSource=new u.by(this.getMappedDataSource(this.listaOrdini)))}})}changePage(n){}getDataFromResolver(){this.totalElements=this.activatedRoute.snapshot.data.listaProdotti.totalElements,this.pageIndex=this.activatedRoute.snapshot.data.listaProdotti.pageIndex}getMappedDataSource(n){return n.map(e=>{const s=[{title:c.$I.visualizza,icon:c.fb.view,type:"icon",callback:()=>{this.route.navigate(["/user/profile/read-ordine/"+e.id])}}];return{id_ordine:e.id,data_ordine:new r.uU("it-IT").transform(e.date,"dd/MM/yyyy"),cost:"\u20ac "+e.products.reduce((l,C)=>l+C.price,0),action:s}})}}return(a=d).\u0275fac=function(n){return new(n||a)(t.Y36(g.gz),t.Y36(g.F0),t.Y36(h.p))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-lista-ordini"]],standalone:!0,features:[t.jDz],decls:6,vars:2,consts:[[1,"container",2,"padding","36px 24px 36px 24px"],[2,"padding-left","10px"],[4,"ngIf","ngIfElse"],["noResult",""],[3,"pageIndex","size","totalElements","dataSource","displayedColumns","cellHeadTypes","hasSearch","hasSelect","emitChangePage"],[1,"body","mt-24"]],template:function(n,e){if(1&n&&(t.TgZ(0,"div",0)(1,"h4",1),t._uU(2,"Storico"),t.qZA(),t.YNc(3,m,2,8,"ng-container",2),t.YNc(4,O,4,3,"ng-template",null,3,t.W1O),t.qZA()),2&n){const s=t.MAs(5);t.xp6(3),t.Q6J("ngIf",null==e.dataSource||null==e.dataSource.data?null:e.dataSource.data.length)("ngIfElse",s)}},dependencies:[r.ez,r.O5,r.gd,_.p],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;padding:12px;background-color:#fff;border-radius:8px}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;align-items:center;justify-content:center}.container[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.938rem;font-weight:700;color:#656d70;line-height:15px;text-decoration:none}"]}),d})()}}]);